<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POST and GET Requests Example</title>
</head>
<body>
<h1>POST and GET Requests Example</h1>

<button onclick="sendPostRequest()">Send POST Request</button>
<button onclick="sendGetRequest()">Send GET Request</button>

<div id="response"></div>

<script>
    function sendPostRequest() {
        fetch('https://e5cb-188-225-101-83.ngrok-free.app/auth', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({user_data: 'query_id=AAFKK8UxAAAAAEorxTGsBFzm&user=%7B%22id%22%3A835005258%2C%22first_name%22%3A%22%D0%94%D0%B0%D0%BD%D0%B8%D1%81%22%2C%22last_name%22%3A%22%D0%93%D0%B0%D0%BB%D0%B5%D0%B5%D0%B2%22%2C%22username%22%3A%22gdrgaleev%22%2C%22language_code%22%3A%22ru%22%2C%22allows_write_to_pm%22%3Atrue%7D&auth_date=1719943921&hash=9b4de5a88711c353b9f077689e4efa32282aacb9a210f6c1a68bdcba2a66e75f'}) // Static JSON data
        })
            .then(response => response.json())
            .then(data => {
                document.getElementById('response').innerText = JSON.stringify(data);
            })
            .catch(error => console.error('Error:', error));
    }

    function sendGetRequest() {
        fetch('https://e5cb-188-225-101-83.ngrok-free.app/quest_uuid', {
            method: 'GET',
            credentials: 'include'  // Включаем cookies
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    throw new TypeError('Expected JSON response from server');
                }
                return response.json();
            })
            .then(data => {
                document.getElementById('response').innerText = JSON.stringify(data);
            })
            .catch(error => console.error('Fetch error:', error));
    }

</script>
</body>
</html>
